<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Kevin Mader" />

<meta name="date" content="2015-04-22" />

<title>Exercise 8: Groups of Objects and Distributions</title>

<script src="09-Description_files/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="09-Description_files/bootstrap-3.3.1/css/readable.min.css" rel="stylesheet" />
<script src="09-Description_files/bootstrap-3.3.1/js/bootstrap.min.js"></script>
<script src="09-Description_files/bootstrap-3.3.1/shim/html5shiv.min.js"></script>
<script src="09-Description_files/bootstrap-3.3.1/shim/respond.min.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #2a211c; color: #bdae9d; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; background-color: #2a211c; color: #bdae9d; border-right: 1px solid #bdae9d; }
td.sourceCode { padding-left: 5px; }
pre, code { color: #bdae9d; background-color: #2a211c; }
code > span.kw { color: #43a8ed; font-weight: bold; }
code > span.dt { text-decoration: underline; }
code > span.dv { color: #44aa43; }
code > span.bn { color: #44aa43; }
code > span.fl { color: #44aa43; }
code > span.ch { color: #049b0a; }
code > span.st { color: #049b0a; }
code > span.co { color: #0066ff; font-style: italic; }
code > span.al { color: #ffff00; }
code > span.fu { color: #ff9358; font-weight: bold; }
code > span.er { font-weight: bold; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">


<div id="header">
<h1 class="title">Exercise 8: Groups of Objects and Distributions</h1>
<h4 class="author"><em>Kevin Mader</em></h4>
<h4 class="date"><em>April 22, 2015</em></h4>
</div>

<div id="TOC">
<ul>
<li><a href="#introductory-material"><span class="toc-section-number">1</span> Introductory Material</a><ul>
<li><a href="#r-studio-r"><span class="toc-section-number">1.1</span> R-Studio / R</a></li>
<li><a href="#new-nodes"><span class="toc-section-number">1.2</span> New Nodes</a></li>
<li><a href="#join"><span class="toc-section-number">1.3</span> Join</a></li>
<li><a href="#cross-join"><span class="toc-section-number">1.4</span> Cross-Join</a></li>
<li><a href="#concatenate"><span class="toc-section-number">1.5</span> Concatenate</a></li>
</ul></li>
<li><a href="#tasks"><span class="toc-section-number">2</span> Tasks</a><ul>
<li><a href="#running-basic-statistical-analyses"><span class="toc-section-number">2.1</span> Running basic statistical analyses</a><ul>
<li><a href="#introduction"><span class="toc-section-number">2.1.1</span> Introduction</a></li>
<li><a href="#tasks-1"><span class="toc-section-number">2.1.2</span> Tasks</a></li>
<li><a href="#questions"><span class="toc-section-number">2.1.3</span> Questions</a></li>
</ul></li>
<li><a href="#comparing-two-real-bone-samples"><span class="toc-section-number">2.2</span> Comparing Two Real Bone Samples</a><ul>
<li><a href="#questions-1"><span class="toc-section-number">2.2.1</span> Questions</a></li>
<li><a href="#hints"><span class="toc-section-number">2.2.2</span> Hints</a></li>
<li><a href="#big-hint-dont-read-unless-youre-stuck"><span class="toc-section-number">2.2.3</span> Big Hint (don’t read unless you’re stuck)</a></li>
</ul></li>
<li><a href="#t-test-simulator"><span class="toc-section-number">2.3</span> T-Test Simulator</a><ul>
<li><a href="#questions-2"><span class="toc-section-number">2.3.1</span> Questions</a></li>
</ul></li>
<li><a href="#grammar-of-graphics-plots-in-r-work-in-progress"><span class="toc-section-number">2.4</span> Grammar of Graphics Plots in R (Work in Progress…)</a><ul>
<li><a href="#introduction-1"><span class="toc-section-number">2.4.1</span> Introduction</a></li>
<li><a href="#tasks-2"><span class="toc-section-number">2.4.2</span> Tasks</a></li>
</ul></li>
<li><a href="#unit-testing-advanced"><span class="toc-section-number">2.5</span> Unit Testing (Advanced)</a><ul>
<li><a href="#dynamic-languages"><span class="toc-section-number">2.5.1</span> Dynamic Languages!</a></li>
</ul></li>
<li><a href="#report-generation-advanced"><span class="toc-section-number">2.6</span> Report Generation (Advanced)</a></li>
</ul></li>
</ul>
</div>

<div id="introductory-material" class="section level1">
<h1><span class="header-section-number">1</span> Introductory Material</h1>
<div id="r-studio-r" class="section level2">
<h2><span class="header-section-number">1.1</span> R-Studio / R</h2>
<p>For the Intraclass Correlation Coefficient you will need the ICC package which can be installed using the following command from R-Studio (or the R terminal)</p>
<pre><code>install.packages(&quot;ICC&quot;)</code></pre>
</div>
<div id="new-nodes" class="section level2">
<h2><span class="header-section-number">1.2</span> New Nodes</h2>
<p>The new names are explained relative to the dataset used in the first problem. So read the first problem for more introductory material on these tables</p>
</div>
<div id="join" class="section level2">
<h2><span class="header-section-number">1.3</span> Join</h2>
<ul>
<li>This node takes two different tables and combines them together based on one or more <strong>key</strong> values.</li>
<li>The default option is an ‘Inner’ join which means the output has all of the keys which appear in <strong>both</strong> the first (table A) and second (table B) table</li>
<li>There are many other possibilities</li>
<li><img src="http://i.stack.imgur.com/1UKp7.png" alt="Joins" /> from (<a href="http://stackoverflow.com/questions/38549/difference-between-inner-and-outer-joins" class="uri">http://stackoverflow.com/questions/38549/difference-between-inner-and-outer-joins</a>)</li>
<li>In many cases inside of KNIME the ‘RowID’ is a reasonable key (you perform a number of operations and want to compare it to the original result)</li>
<li>For the aforementioned dataset we will apply an inner-join using the ‘Join’ block and matching on the <em>ID</em> column in both</li>
</ul>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="right">BMD</th>
<th align="right">MECHANICS_STIFFNESS</th>
<th align="right">CORT_DTO__C_TH</th>
<th align="right">CORT_DTO__C_TH_SD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">351</td>
<td align="right">0.0302208</td>
<td align="right">57.16318</td>
<td align="right">0.186455</td>
<td align="right">0.019785</td>
</tr>
<tr class="even">
<td align="right">356</td>
<td align="right">0.0327883</td>
<td align="right">54.97201</td>
<td align="right">0.183007</td>
<td align="right">0.015696</td>
</tr>
<tr class="odd">
<td align="right">357</td>
<td align="right">0.0360747</td>
<td align="right">73.59088</td>
<td align="right">0.216930</td>
<td align="right">0.028019</td>
</tr>
<tr class="even">
<td align="right">359</td>
<td align="right">0.0311451</td>
<td align="right">49.85482</td>
<td align="right">0.193758</td>
<td align="right">0.024087</td>
</tr>
</tbody>
</table>
<p><strong>JOIN</strong></p>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="left">D1Mit64</th>
<th align="left">D1Mit236</th>
<th align="left">D1Mit7</th>
<th align="left">D1Mit386</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">351</td>
<td align="left">H</td>
<td align="left">H</td>
<td align="left">H</td>
<td align="left">H</td>
</tr>
<tr class="even">
<td align="right">356</td>
<td align="left">H</td>
<td align="left">A</td>
<td align="left">A</td>
<td align="left">A</td>
</tr>
<tr class="odd">
<td align="right">357</td>
<td align="left">H</td>
<td align="left">B</td>
<td align="left">B</td>
<td align="left">B</td>
</tr>
<tr class="even">
<td align="right">359</td>
<td align="left">A</td>
<td align="left">B</td>
<td align="left">B</td>
<td align="left">B</td>
</tr>
</tbody>
</table>
<p><strong>BECOMES</strong> (hiding excess columns)</p>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="right">BMD</th>
<th align="right">MECHANICS_STIFFNESS</th>
<th align="left">D1Mit64</th>
<th align="left">D1Mit236</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">351</td>
<td align="right">0.0302208</td>
<td align="right">57.16318</td>
<td align="left">H</td>
<td align="left">H</td>
</tr>
<tr class="even">
<td align="right">356</td>
<td align="right">0.0327883</td>
<td align="right">54.97201</td>
<td align="left">H</td>
<td align="left">A</td>
</tr>
<tr class="odd">
<td align="right">357</td>
<td align="right">0.0360747</td>
<td align="right">73.59088</td>
<td align="left">H</td>
<td align="left">B</td>
</tr>
<tr class="even">
<td align="right">359</td>
<td align="right">0.0311451</td>
<td align="right">49.85482</td>
<td align="left">A</td>
<td align="left">B</td>
</tr>
</tbody>
</table>
</div>
<div id="cross-join" class="section level2">
<h2><span class="header-section-number">1.4</span> Cross-Join</h2>
<ul>
<li>This join performs what is mathematically known as a Cartesian Product on the two tables</li>
<li>For those more familiar with computer programming nomenclature this is</li>
</ul>
<pre class="{python}"><code>for(eleA in tableA):
  for (eleB in tableB):
    yield (eleA,eleB)</code></pre>
<ul>
<li>in plain language this is equivalent of combining every element with every other element</li>
<li>This is useful when performing parameter sweeps or other similar analyses where you want to try every threshold value with every sigma value with every type of filter (since you have no prior information about which one works best and they all work effectively independently)</li>
<li>Using the last table as an example (while it might initially not seem to make sense, it is actually used for measuring the error level in such systems permuting the genetic material through the original phenotype data to determine the baseline number of correlations found)</li>
</ul>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="right">BMD</th>
<th align="right">MECHANICS_STIFFNESS</th>
<th align="right">CORT_DTO__C_TH</th>
<th align="right">CORT_DTO__C_TH_SD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">351</td>
<td align="right">0.0302208</td>
<td align="right">57.16318</td>
<td align="right">0.186455</td>
<td align="right">0.019785</td>
</tr>
<tr class="even">
<td align="right">356</td>
<td align="right">0.0327883</td>
<td align="right">54.97201</td>
<td align="right">0.183007</td>
<td align="right">0.015696</td>
</tr>
<tr class="odd">
<td align="right">357</td>
<td align="right">0.0360747</td>
<td align="right">73.59088</td>
<td align="right">0.216930</td>
<td align="right">0.028019</td>
</tr>
<tr class="even">
<td align="right">359</td>
<td align="right">0.0311451</td>
<td align="right">49.85482</td>
<td align="right">0.193758</td>
<td align="right">0.024087</td>
</tr>
</tbody>
</table>
<p><strong>CROSS JOIN</strong></p>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="left">D1Mit64</th>
<th align="left">D1Mit236</th>
<th align="left">D1Mit7</th>
<th align="left">D1Mit386</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">351</td>
<td align="left">H</td>
<td align="left">H</td>
<td align="left">H</td>
<td align="left">H</td>
</tr>
<tr class="even">
<td align="right">356</td>
<td align="left">H</td>
<td align="left">A</td>
<td align="left">A</td>
<td align="left">A</td>
</tr>
<tr class="odd">
<td align="right">357</td>
<td align="left">H</td>
<td align="left">B</td>
<td align="left">B</td>
<td align="left">B</td>
</tr>
<tr class="even">
<td align="right">359</td>
<td align="left">A</td>
<td align="left">B</td>
<td align="left">B</td>
<td align="left">B</td>
</tr>
</tbody>
</table>
<p><strong>BECOMES</strong> (hiding excess columns)</p>
<table>
<thead>
<tr class="header">
<th align="right">ID.x</th>
<th align="right">BMD</th>
<th align="right">MECHANICS_STIFFNESS</th>
<th align="right">ID.y</th>
<th align="left">D1Mit64</th>
<th align="left">D1Mit236</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">351</td>
<td align="right">0.0302208</td>
<td align="right">57.16318</td>
<td align="right">351</td>
<td align="left">H</td>
<td align="left">H</td>
</tr>
<tr class="even">
<td align="right">356</td>
<td align="right">0.0327883</td>
<td align="right">54.97201</td>
<td align="right">351</td>
<td align="left">H</td>
<td align="left">H</td>
</tr>
<tr class="odd">
<td align="right">357</td>
<td align="right">0.0360747</td>
<td align="right">73.59088</td>
<td align="right">351</td>
<td align="left">H</td>
<td align="left">H</td>
</tr>
<tr class="even">
<td align="right">359</td>
<td align="right">0.0311451</td>
<td align="right">49.85482</td>
<td align="right">351</td>
<td align="left">H</td>
<td align="left">H</td>
</tr>
<tr class="odd">
<td align="right">351</td>
<td align="right">0.0302208</td>
<td align="right">57.16318</td>
<td align="right">356</td>
<td align="left">H</td>
<td align="left">A</td>
</tr>
<tr class="even">
<td align="right">356</td>
<td align="right">0.0327883</td>
<td align="right">54.97201</td>
<td align="right">356</td>
<td align="left">H</td>
<td align="left">A</td>
</tr>
<tr class="odd">
<td align="right">357</td>
<td align="right">0.0360747</td>
<td align="right">73.59088</td>
<td align="right">356</td>
<td align="left">H</td>
<td align="left">A</td>
</tr>
<tr class="even">
<td align="right">359</td>
<td align="right">0.0311451</td>
<td align="right">49.85482</td>
<td align="right">356</td>
<td align="left">H</td>
<td align="left">A</td>
</tr>
<tr class="odd">
<td align="right">351</td>
<td align="right">0.0302208</td>
<td align="right">57.16318</td>
<td align="right">357</td>
<td align="left">H</td>
<td align="left">B</td>
</tr>
<tr class="even">
<td align="right">356</td>
<td align="right">0.0327883</td>
<td align="right">54.97201</td>
<td align="right">357</td>
<td align="left">H</td>
<td align="left">B</td>
</tr>
<tr class="odd">
<td align="right">357</td>
<td align="right">0.0360747</td>
<td align="right">73.59088</td>
<td align="right">357</td>
<td align="left">H</td>
<td align="left">B</td>
</tr>
<tr class="even">
<td align="right">359</td>
<td align="right">0.0311451</td>
<td align="right">49.85482</td>
<td align="right">357</td>
<td align="left">H</td>
<td align="left">B</td>
</tr>
<tr class="odd">
<td align="right">351</td>
<td align="right">0.0302208</td>
<td align="right">57.16318</td>
<td align="right">359</td>
<td align="left">A</td>
<td align="left">B</td>
</tr>
<tr class="even">
<td align="right">356</td>
<td align="right">0.0327883</td>
<td align="right">54.97201</td>
<td align="right">359</td>
<td align="left">A</td>
<td align="left">B</td>
</tr>
<tr class="odd">
<td align="right">357</td>
<td align="right">0.0360747</td>
<td align="right">73.59088</td>
<td align="right">359</td>
<td align="left">A</td>
<td align="left">B</td>
</tr>
<tr class="even">
<td align="right">359</td>
<td align="right">0.0311451</td>
<td align="right">49.85482</td>
<td align="right">359</td>
<td align="left">A</td>
<td align="left">B</td>
</tr>
</tbody>
</table>
</div>
<div id="concatenate" class="section level2">
<h2><span class="header-section-number">1.5</span> Concatenate</h2>
<ul>
<li>Concatenate is the last of the table operations covered today.</li>
<li>It can be thought of as combining two tables which have the same columns but different row values</li>
<li><p>For example if we have each experiment in a separate file, it would make sense to concatenate them all together rather than <em>Join</em> or <em>Cross Join</em></p></li>
<li><p>First table</p></li>
</ul>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="right">BMD</th>
<th align="right">MECHANICS_STIFFNESS</th>
<th align="right">CORT_DTO__C_TH</th>
<th align="right">CORT_DTO__C_TH_SD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">351</td>
<td align="right">0.0302208</td>
<td align="right">57.16318</td>
<td align="right">0.186455</td>
<td align="right">0.019785</td>
</tr>
<tr class="even">
<td align="right">356</td>
<td align="right">0.0327883</td>
<td align="right">54.97201</td>
<td align="right">0.183007</td>
<td align="right">0.015696</td>
</tr>
<tr class="odd">
<td align="right">357</td>
<td align="right">0.0360747</td>
<td align="right">73.59088</td>
<td align="right">0.216930</td>
<td align="right">0.028019</td>
</tr>
<tr class="even">
<td align="right">359</td>
<td align="right">0.0311451</td>
<td align="right">49.85482</td>
<td align="right">0.193758</td>
<td align="right">0.024087</td>
</tr>
</tbody>
</table>
<ul>
<li><p>Second set of results</p>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="left"></th>
<th align="right">BMD MEC</th>
<th align="left">HANICS_STIFFNESS COR</th>
<th align="left">T_DTO__C_TH COR</th>
<th align="left">T_DTO__C_TH_SD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">21</td>
<td align="left">457</td>
<td align="right">0.0311451</td>
<td align="left">49.28858</td>
<td align="left">0.178971</td>
<td align="left">0.020928</td>
</tr>
<tr class="even">
<td align="right">22</td>
<td align="left">459</td>
<td align="right">0.0293992</td>
<td align="left">58.17281</td>
<td align="left">0.158907</td>
<td align="left">0.018856</td>
</tr>
<tr class="odd">
<td align="right">23</td>
<td align="left">470</td>
<td align="right">0.0316586</td>
<td align="left">61.49628</td>
<td align="left">0.162435</td>
<td align="left">0.019928</td>
</tr>
<tr class="even">
<td align="right">24</td>
<td align="left">472</td>
<td align="right">0.0345342</td>
<td align="left">56.62613</td>
<td align="left">0.185258</td>
<td align="left">0.028595</td>
</tr>
</tbody>
</table></li>
</ul>
<p>The concatenation of the two groups</p>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">ID</th>
<th align="right">BMD</th>
<th align="right">MECHANICS_STIFFNESS</th>
<th align="right">CORT_DTO__C_TH</th>
<th align="right">CORT_DTO__C_TH_SD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">351</td>
<td align="right">0.0302208</td>
<td align="right">57.16318</td>
<td align="right">0.186455</td>
<td align="right">0.019785</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">356</td>
<td align="right">0.0327883</td>
<td align="right">54.97201</td>
<td align="right">0.183007</td>
<td align="right">0.015696</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="right">357</td>
<td align="right">0.0360747</td>
<td align="right">73.59088</td>
<td align="right">0.216930</td>
<td align="right">0.028019</td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="right">359</td>
<td align="right">0.0311451</td>
<td align="right">49.85482</td>
<td align="right">0.193758</td>
<td align="right">0.024087</td>
</tr>
<tr class="odd">
<td align="left">21</td>
<td align="right">457</td>
<td align="right">0.0311451</td>
<td align="right">49.28858</td>
<td align="right">0.178971</td>
<td align="right">0.020928</td>
</tr>
<tr class="even">
<td align="left">22</td>
<td align="right">459</td>
<td align="right">0.0293992</td>
<td align="right">58.17281</td>
<td align="right">0.158907</td>
<td align="right">0.018856</td>
</tr>
<tr class="odd">
<td align="left">23</td>
<td align="right">470</td>
<td align="right">0.0316586</td>
<td align="right">61.49628</td>
<td align="right">0.162435</td>
<td align="right">0.019928</td>
</tr>
<tr class="even">
<td align="left">24</td>
<td align="right">472</td>
<td align="right">0.0345342</td>
<td align="right">56.62613</td>
<td align="right">0.185258</td>
<td align="right">0.028595</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="tasks" class="section level1">
<h1><span class="header-section-number">2</span> Tasks</h1>
<ul>
<li>The workflows (or their starts) are available <a href="09-files/Workflows.zip?raw=true">here</a>.</li>
</ul>
<div id="running-basic-statistical-analyses" class="section level2">
<h2><span class="header-section-number">2.1</span> Running basic statistical analyses</h2>
<p>For this example we will start with a fairly complicated dataset from a genetics analysis we did at the Institute of Biomechanics.</p>
<div id="introduction" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Introduction</h3>
<p>There are 1000 mouse femur bones which have been measured at high resolution and a number of shape analyses run on each sample. - Phenotypical Information - Each column represents a metric which was assessed in the images - <code>CORT_DTO__C_TH</code> for example is the mean thickness of the cortical bone</p>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="right">BMD</th>
<th align="right">MECHANICS_STIFFNESS</th>
<th align="right">CORT_DTO__C_TH</th>
<th align="right">CORT_DTO__C_TH_SD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">351</td>
<td align="right">0.0302208</td>
<td align="right">57.16318</td>
<td align="right">0.186455</td>
<td align="right">0.019785</td>
</tr>
<tr class="even">
<td align="right">356</td>
<td align="right">0.0327883</td>
<td align="right">54.97201</td>
<td align="right">0.183007</td>
<td align="right">0.015696</td>
</tr>
<tr class="odd">
<td align="right">357</td>
<td align="right">0.0360747</td>
<td align="right">73.59088</td>
<td align="right">0.216930</td>
<td align="right">0.028019</td>
</tr>
<tr class="even">
<td align="right">359</td>
<td align="right">0.0311451</td>
<td align="right">49.85482</td>
<td align="right">0.193758</td>
<td align="right">0.024087</td>
</tr>
</tbody>
</table>
<ul>
<li>Genetic Information (genoTable.csv)</li>
<li>Each animal has been tagged at a number of different regions of the genome (called markers: D1Mit236)</li>
<li>At each marker there are 3 (actually 4) possibilities</li>
<li>A is homozygous (the same from both parents) from the A strain</li>
<li>B is homozygous from the B strain</li>
<li>H is heterozygous (one from A, one from B)</li>
<li><p>‘-’ is missing or erronous measurements</p>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="right">D1Mi</th>
<th align="left">t64 D1Mi</th>
<th align="left">t236 D1Mi</th>
<th align="left">t7 D1Mi</th>
<th align="left">t386</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">101</td>
<td align="right">685</td>
<td align="left">A</td>
<td align="left">H</td>
<td align="left">H</td>
<td align="left">H</td>
</tr>
<tr class="even">
<td align="right">102</td>
<td align="right">686</td>
<td align="left">B</td>
<td align="left">B</td>
<td align="left">B</td>
<td align="left">H</td>
</tr>
<tr class="odd">
<td align="right">103</td>
<td align="right">687</td>
<td align="left">A</td>
<td align="left">A</td>
<td align="left">H</td>
<td align="left">H</td>
</tr>
<tr class="even">
<td align="right">104</td>
<td align="right">688</td>
<td align="left">H</td>
<td align="left">H</td>
<td align="left">H</td>
<td align="left">A</td>
</tr>
<tr class="odd">
<td align="right">105</td>
<td align="right">689</td>
<td align="left">H</td>
<td align="left">H</td>
<td align="left">-</td>
<td align="left">A</td>
</tr>
</tbody>
</table></li>
</ul>
</div>
<div id="tasks-1" class="section level3">
<h3><span class="header-section-number">2.1.2</span> Tasks</h3>
<ol style="list-style-type: decimal">
<li>Download the two needed tables to start the analysis</li>
</ol>
<ul>
<li><a href="09-files/phenoTable.csv?raw=true">phenoTable</a></li>
<li><a href="09-files/genoTable.csv?raw=true">genoTable</a></li>
</ul>
<ol style="list-style-type: decimal">
<li>Using the workflow ‘ComparingSamples’ load the data and make sure you can produce the basic plots for the histogram <img src="09-files/ThicknessHistogram.png" alt="Histogram" /></li>
<li>Explore the data and correlations between various metrics by using the ‘Scatter Matrix’ plotting component. Change the components to examine different variables <img src="09-files/ScatterMatrix.png" alt="Scatter Matrix" /></li>
<li>For the rest of the analysis you can connect the various components to the ‘Column Filter’ node since that is the last step in the processing</li>
<li>Use one of the T-Test nodes in the <em>Statistics -&gt; Hypothesis Testing</em> section to see if there is a statistically significant difference between Gender’s when examining <em>Cortical Bone Microstructural Thickness (Mean)</em></li>
</ol>
<ul>
<li>Which value is the p-value?</li>
<li>What does the p-value mean, is it significant, by what criterion?</li>
</ul>
<ol style="list-style-type: decimal">
<li>Use another node from the <em>Hypothesis Testing</em> section to evaluate the effect on the <strong>D16Mit5</strong> on the Lacuna Distribution Anisotropy? Is it significant?</li>
</ol>
</div>
<div id="questions" class="section level3">
<h3><span class="header-section-number">2.1.3</span> Questions</h3>
<ol style="list-style-type: decimal">
<li>In the ‘Independent Groups T-Test’ node we can run a t-test against all of the columns at the same time, why <strong>SHOULDN’T</strong> we do this? <img src="09-files/TTestPanel.png" alt="Independent Groups" /></li>
</ol>
<ul>
<li>If we do, how do we need to interpret this in the results</li>
<li>Is p&lt;0.05 a sufficient signifance criteria?</li>
</ul>
</div>
</div>
<div id="comparing-two-real-bone-samples" class="section level2">
<h2><span class="header-section-number">2.2</span> Comparing Two Real Bone Samples</h2>
<p><img src="09-files/ComparingBone.png" alt="Comparing Bone" /></p>
<p>For this example we will compare two real cortical bone samples taken from mice. The data will be downloaded in KNIME from the course website (KNIME can also download / upload to FTP servers making sharing results and data easier). - If you are using your own computer you will need to change the <em>Target Folder</em> in both of the “Download” nodes to something reasonable (just click Browse)</p>
<p>For the purpose of the analysis and keeping the data sizes small, we will use <em>Kevin’s Crazy Camera</em> again for simulating the noisy detection process. The assignment aims to be more integrative and you will combine a number of different lectures to get to the final answer.</p>
<div id="questions-1" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Questions</h3>
<ol style="list-style-type: decimal">
<li>We want to know if there is a statistically significant difference in</li>
</ol>
<ul>
<li>cell volume</li>
<li>cell shape</li>
<li>cell density</li>
<li>between the two samples given the variation in the detector</li>
<li>which metric do we need here? why?</li>
</ul>
<ol style="list-style-type: decimal">
<li>We see in the volume comparison a very skewed representation of the data <img src="09-files/VolumeComparison.png" alt="Volume/Num Pixels" /></li>
</ol>
<ul>
<li>why is this? (Hint check the segmented images)</li>
<li>What might be done to alleviate it (hint Row Filter)</li>
</ul>
</div>
<div id="hints" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Hints</h3>
<ol style="list-style-type: decimal">
<li>Look at the kind of noise (you can peek inside the Crappy Camera) to choose the proper filter</li>
<li>Use an automated thresholding technique for finding the bone <a href="https://github.com/kmader/Quantitative-Big-Imaging-2015/blob/master/Exercises/04-Description.md#part-1---automatic-thresholding">automatic-methods</a> <img src="09-files/Threshold.png" alt="Threshold" /></li>
<li>To do this we will need to enhance the image, segment out the bone (dense) tissue, find the mask so that we can look at the background: <a href="https://github.com/kmader/Quantitative-Big-Imaging-2015/blob/master/Exercises/04-Description.md#part-4---contouring">contouring</a> <img src="09-files/BoneRegions.png" alt="Threshold" /></li>
<li>We then need to label the cells, and analyze their volume and shape: <a href="https://github.com/kmader/Quantitative-Big-Imaging-2015/blob/master/Exercises/06-Description.md#part-1---basic-labeling">labeling</a> <img src="09-files/ComponentLabeling.png" alt="CL" /></li>
<li>Use a <em>Chunk Loop</em> for the <em>Segmenting Features</em> node to prevent all of the features being dumped into the same output (they can afterwards be recombined with the original images using the <em>Join</em> node) <img src="09-files/ChunkLoop.png" alt="ChunkLoop" /></li>
<li>The final join should combine the output of the feature analysis (the end loop in this case) and the original crappy camera images. Since the <em>Chunk Loop</em> outputs iterations, we simply use that as the <strong>key</strong> for joining <img src="09-files/FinalJoin.png" alt="ChunkLoop" /></li>
<li>Use Morphology and strongy filter parameters it might be possible to maximize the differences in the groups</li>
<li>You can make the plots in R (sometimes easier than KNIME) using the <em>R View (Table)</em> node and the following code (for volume)</li>
</ol>
<pre><code>library(ggplot2)
cur.df&lt;-data.frame(
  sample=as.factor(knime.in$&quot;Image Number&quot;),
    measurement=knime.in$&quot;Measurement_Number&quot;,
    volume=knime.in$&quot;Num Pix&quot;
    )
    
ggplot(cur.df,aes(x=volume))+
    geom_density(aes(color=sample,group=measurement))+
    theme_bw(25)</code></pre>
<ul>
<li>Mean Volume <img src="09-files/MeanVolumePlot.png" alt="Mean Volume" /></li>
</ul>
<pre><code>library(ggplot2)
library(plyr)
cur.df&lt;-data.frame(
  sample=as.factor(knime.in$&quot;Image Number&quot;),
    measurement=knime.in$&quot;Measurement_Number&quot;,
    volume=knime.in$&quot;Num Pix&quot;
    )
sum.df&lt;-ddply(cur.df,.(sample,measurement),function(in.df) {
    data.frame(mean.volume=mean(in.df$volume),cell.count=nrow(in.df))
})
ggplot(sum.df,aes(x=mean.volume))+
    geom_density(aes(color=sample))+
    theme_bw(25)</code></pre>
<ul>
<li>Cell Count</li>
</ul>
<pre><code>library(ggplot2)
library(plyr)
cur.df&lt;-data.frame(
  sample=as.factor(knime.in$&quot;Image Number&quot;),
    measurement=knime.in$&quot;Measurement_Number&quot;,
    volume=knime.in$&quot;Num Pix&quot;
    )
sum.df&lt;-ddply(cur.df,.(sample,measurement),function(in.df) {
    data.frame(mean.volume=mean(in.df$volume),cell.count=nrow(in.df))
})
ggplot(sum.df,aes(x=cell.count))+
    geom_density(aes(color=sample))+
    theme_bw(25)</code></pre>
<ol style="list-style-type: decimal">
<li>What is intraclass correlation? How can it be applied to these data?</li>
</ol>
<ul>
<li>The following code can be used inside an R View block to calculate the ICC value (and then just click ‘Eval Script’)</li>
</ul>
<pre><code>library(ICC)
in.data&lt;-data.frame(
  metric = knime.in$&quot;Num Pix&quot;,
    group = knime.in$&quot;Image Number&quot;
    )
icVal&lt;-ICCbare(metric,group,data=in.data)$ICC
icVal</code></pre>
<ul>
<li>If the value for a specific metric is 0.012 how should we interpret that?</li>
</ul>
</div>
<div id="big-hint-dont-read-unless-youre-stuck" class="section level3">
<h3><span class="header-section-number">2.2.3</span> Big Hint (don’t read unless you’re stuck)</h3>
<p>One possible final result looks something like this <img src="09-files/PartialSolution.png" alt="Partial Solution" /></p>
</div>
</div>
<div id="t-test-simulator" class="section level2">
<h2><span class="header-section-number">2.3</span> T-Test Simulator</h2>
<p>This exercise (workflow named - Statistical Significance Hunter) shows the same results as we discussed in the lecture for finding p-values of significance. It takes a completely random stream of numbers with a mean 0.0 and tests them against a null hypothesis (that they equal 0) in small batches, you can adjust the size of the batches, the number of items and the confidence interval. The result is a pie chart showing the number of “significant” results found using the standard scientific criteria for common studies. <img src="09-files/TTestSimulator.png" alt="T-Test Simulator" /></p>
<div id="questions-2" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Questions</h3>
<ol style="list-style-type: decimal">
<li>If we change the size of the chunks to the same as the number of elements in the list do we still expect to find ‘significant’ (&lt;0.05) values? Why or why not?</li>
<li>How does comparing against the null hypothesis being 0 relate to comparing two groups?</li>
<li>How does comparing a single column compare to looking at different metrics for the same samples?</li>
<li>What is bonferroni correction (hint: wikipedia) and how could it be applied to this simulation?</li>
</ol>
<ul>
<li>Make the modification needed</li>
</ul>
</div>
</div>
<div id="grammar-of-graphics-plots-in-r-work-in-progress" class="section level2">
<h2><span class="header-section-number">2.4</span> Grammar of Graphics Plots in R (Work in Progress…)</h2>
<div id="introduction-1" class="section level3">
<h3><span class="header-section-number">2.4.1</span> Introduction</h3>
<p>Making plots or graphics should be divided into separate independent components. - <strong>Setup</strong> is the <span class="math">\(ggplot\)</span> command and the data - <strong>Mapping</strong> is in the <span class="math">\(aes\)</span> command <span class="math">\[ ggplot(\textrm{input data frame},aes(x=\textrm{name of x column},y=\textrm{name of y column}))+ \]</span> - <strong>Plot</strong> is the next command (geom_point, geom_smooth, geom_density, geom_histogram, geom_contour) <span class="math">\[ \textrm{geom_point}()+ \]</span> - <strong>Coordinates</strong> can then be added to any type of plot (coord_equal, coord_polar, etc) - <strong>Scales</strong> can also be added (scale_x_log10, scale_y_sqrt, scale_color_gradientn) - <strong>Labels</strong> are added <span class="math">\[ labs(x=&quot;\textrm{x label}&quot;,y=&quot;\textrm{y label}&quot;,title=&quot;\textrm{title}&quot;) \]</span></p>
</div>
<div id="tasks-2" class="section level3">
<h3><span class="header-section-number">2.4.2</span> Tasks</h3>
<ul>
<li>Start RStudio</li>
<li>Load the necessary libraries</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;ggplot2&quot;</span>,<span class="st">&quot;knitr&quot;</span>)</code></pre>
<ul>
<li>Load the <em>phenoTable</em> from the first exercise</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># read the table in</span>
phen.table&lt;-<span class="kw">read.csv</span>(<span class="st">&quot;09-files/phenoTable.csv&quot;</span>)
<span class="co"># take the first 4 rows and columns</span>
p.sub.table&lt;-pheno.table[<span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">4</span>),<span class="kw">c</span>(<span class="dv">35</span>,<span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">4</span>))]
<span class="co"># print it out nicely</span>
<span class="kw">kable</span>(p.sub.table)</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="right">BMD</th>
<th align="right">MECHANICS_STIFFNESS</th>
<th align="right">CORT_DTO__C_TH</th>
<th align="right">CORT_DTO__C_TH_SD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">351</td>
<td align="right">0.0302208</td>
<td align="right">57.16318</td>
<td align="right">0.186455</td>
<td align="right">0.019785</td>
</tr>
<tr class="even">
<td align="right">356</td>
<td align="right">0.0327883</td>
<td align="right">54.97201</td>
<td align="right">0.183007</td>
<td align="right">0.015696</td>
</tr>
<tr class="odd">
<td align="right">357</td>
<td align="right">0.0360747</td>
<td align="right">73.59088</td>
<td align="right">0.216930</td>
<td align="right">0.028019</td>
</tr>
<tr class="even">
<td align="right">359</td>
<td align="right">0.0311451</td>
<td align="right">49.85482</td>
<td align="right">0.193758</td>
<td align="right">0.024087</td>
</tr>
<tr class="odd">
<td align="right">- Set</td>
<td align="right">up the inpu</td>
<td align="right">t table as ```phen.tab</td>
<td align="right">le``` and the map</td>
<td align="right">ping with the x position mapped to BMD (Bone Mineral Density) and the y position as <code>CT_TH_RAD</code> (Cortical Bone Thickness)</td>
</tr>
</tbody>
</table>
<pre><code>ggplot(phen.table,aes(x=BMD,y=CT_TH_RAD))</code></pre>
<ul>
<li>Create the first simple plot by adding a point representation to the plot</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(phen.table,<span class="kw">aes</span>(<span class="dt">x=</span>BMD,<span class="dt">y=</span>CT_TH_RAD))+<span class="kw">geom_point</span>()</code></pre>
<p><img src="09-files/pres_figures/unnamed-chunk-14-1.png" title="" alt="" style="display: block; margin: auto;" /> - Change color of the points to show if the animal is female or not (in the mapping)</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(phen.table,<span class="kw">aes</span>(<span class="dt">x=</span>BMD,<span class="dt">y=</span>CT_TH_RAD,<span class="dt">color=</span>FEMALE))+<span class="kw">geom_point</span>()</code></pre>
<p><img src="09-files/pres_figures/unnamed-chunk-15-1.png" title="" alt="" style="display: block; margin: auto;" /> - Show the color as a discrete (factor) value instead of a number</p>
<pre class="sourceCode r"><code class="sourceCode r">m.table&lt;-<span class="kw">mutate</span>(phen.table,<span class="dt">GENDER =</span> <span class="kw">ifelse</span>(FEMALE==<span class="dv">1</span>,<span class="st">&quot;F&quot;</span>,<span class="st">&quot;M&quot;</span>))
<span class="kw">ggplot</span>(m.table,<span class="kw">aes</span>(<span class="dt">x=</span>BMD,<span class="dt">y=</span>CT_TH_RAD,<span class="dt">color=</span>GENDER))+<span class="kw">geom_point</span>()</code></pre>
<p><img src="09-files/pres_figures/unnamed-chunk-16-1.png" title="" alt="" style="display: block; margin: auto;" /> - Make the plot in two facets (windows) instead of the same one</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(m.table,<span class="kw">aes</span>(<span class="dt">x=</span>BMD,<span class="dt">y=</span>CT_TH_RAD,<span class="dt">color=</span>GENDER))+
<span class="st">  </span><span class="kw">geom_point</span>()+
<span class="st">  </span><span class="kw">facet_wrap</span>(~GENDER)</code></pre>
<p><img src="09-files/pres_figures/unnamed-chunk-17-1.png" title="" alt="" style="display: block; margin: auto;" /> - Make the facet based on evenly (in number) dividing the points into 6 groups by the number of lacuna (LACUNA_COUNT)</p>
<pre class="sourceCode r"><code class="sourceCode r">m.table&lt;-<span class="kw">mutate</span>(phen.table,
                <span class="dt">GENDER =</span> <span class="kw">ifelse</span>(FEMALE==<span class="dv">1</span>,<span class="st">&quot;F&quot;</span>,<span class="st">&quot;M&quot;</span>),
                <span class="dt">LACUNA_NUMBER_GROUP =</span> <span class="kw">cut_number</span>(LACUNA_COUNT,<span class="dv">6</span>)
                )
<span class="kw">ggplot</span>(m.table,<span class="kw">aes</span>(<span class="dt">x=</span>BMD,<span class="dt">y=</span>CT_TH_RAD,<span class="dt">color=</span>GENDER))+
<span class="st">  </span><span class="kw">geom_point</span>()+
<span class="st">  </span><span class="kw">facet_wrap</span>(~LACUNA_NUMBER_GROUP)</code></pre>
<p><img src="09-files/pres_figures/unnamed-chunk-18-1.png" title="" alt="" style="display: block; margin: auto;" /> - Fix the labels and add a white background (<code>theme_bw</code>) with font-size 12</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(m.table,<span class="kw">aes</span>(<span class="dt">x=</span>BMD,<span class="dt">y=</span>CT_TH_RAD,<span class="dt">color=</span>GENDER))+
<span class="st">  </span><span class="kw">geom_point</span>()+
<span class="st">  </span><span class="kw">facet_wrap</span>(~LACUNA_NUMBER_GROUP)+
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;Bone Mineral Density&quot;</span>,<span class="dt">y=</span><span class="st">&quot;Cortical Bone Thickness (um)&quot;</span>,<span class="dt">color=</span><span class="st">&quot;Gender&quot;</span>)+
<span class="st">  </span><span class="kw">theme_bw</span>(<span class="dv">12</span>)</code></pre>
<p><img src="09-files/pres_figures/unnamed-chunk-19-1.png" title="" alt="" style="display: block; margin: auto;" /></p>
<p>For more information and tutorial read about it in: <a href="http://ggplot2.org/" class="uri">http://ggplot2.org/</a></p>
</div>
</div>
<div id="unit-testing-advanced" class="section level2">
<h2><span class="header-section-number">2.5</span> Unit Testing (Advanced)</h2>
<ul>
<li>R : <a href="http://cran.r-project.org/web/packages/testit/index.html">testit</a> package in R to test functions</li>
<li>Matlab : <a href="http://www.mathworks.com/support/2015a/matlab/8.5/demos/matlab-unit-test-framework-in-release-2013a.html">Matlab Unit Test Framework</a></li>
<li>Python : easiest <a href="https://docs.python.org/2/library/doctest.html#module-doctest">doctest</a> or more flexible <a href="http://docs.python-guide.org/en/latest/writing/tests/">unittest</a></li>
<li>Java : <a href="http://junit.org/">JUnit</a></li>
<li>Scala : <a href="http://www.scalatest.org/">ScalaTest</a></li>
</ul>
<p>Unit Testing works differently in every language but the major ideas remain the same.</p>
<ul>
<li>Using the language of your choice make a function that reads in an binary 2D array and counts the number of true points. In scala this would look like</li>
</ul>
<pre class="{scala}"><code>def countPoints(in: Array[Array[Boolean]]): Int = 
  in.flatten.map(if(_) 1 else 0).sum</code></pre>
<ul>
<li>Now create a series of tests to ensure it works correctly</li>
<li><p>A simple 1x2 array with one true</p>
<pre class="{scala}"><code>import org.scalatest.{FunSuite, Matchers}
class PointCounterTests extends FunSuite with Matchers 
  test(&quot;Simple Array&quot;) {
val simpleArr = Array(Array(true,false,false))
countPoints(simpleArr) shouldBe 1
  }
}</code></pre></li>
<li><p>An empty error should return 0</p>
<pre class="{scala}"><code>val emptyArr = Array(new Array[Boolean](0))
countPoints(emptyArr) shouldBe 0</code></pre></li>
</ul>
<div id="dynamic-languages" class="section level3">
<h3><span class="header-section-number">2.5.1</span> Dynamic Languages!</h3>
<p>It is critical to note, if you are using a statically-type language (C, C++, Fortran Java, Scala, Groovy, etc) you do not need to explicitly check type issues since that is automatically done by the compiler (you cannot give a string to a function expecting an integer, it simply will not run) If you are using a dynamically typed language (Matlab, Python, R, Mathematica, etc) you will need to make additional tests to make sure your function handles a variety of different input correctly. For example if you make the <code>countPoints</code> function in Matlab what happens when you give it a 3D array or a string? Either it should immediately throw an error message explaining that this input doesn’t make sense or explicitly handle this case. Otherwise you could have very unexpected behavior. The following is a perfectly reasonable function in Matlab</p>
<pre class="{matlab}"><code>function [out]=isBiggerThanFive(inVar)
  if inVar&gt;5
    disp([inVar &#39; is bigger than 5&#39;])
    out=true;
  else
    disp([inVar &#39; is smaller than 5&#39;])
    out=false;
  end</code></pre>
<p>And if you execute <code>isBiggerThanFive('Tom')</code> it executes perfectly and you get <code>Tom is bigger than 5</code> which is probably meaningless. It would be much better if the program throws an error saying that a string is not an appropriate type for this function.</p>
</div>
</div>
<div id="report-generation-advanced" class="section level2">
<h2><span class="header-section-number">2.6</span> Report Generation (Advanced)</h2>
<ul>
<li><a href="http://yihui.name/knitr/">knitr</a> for report generation</li>
</ul>
<p>To make a report in RStudio you can go the <em>File -&gt; New Files -&gt; R Markdown…</em> menu. You can then enter code in blocks as are shown in the example and text or Markdown (text with dashes and pound signs for formatting) to make a document which compiles to a PDF, HTML-file, or Word Document.</p>
<p>This allows you to have your entire analysis in a simple document. Additionally it prevents you from having to deal with some of the major challenges with Matlab, Python, and R (dynamic languages) involving name-spaces and analyses that run fine now, but do not work or work differently tomorrow.</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
